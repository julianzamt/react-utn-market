(this["webpackJsonpTruchiMarket-utn"]=this["webpackJsonpTruchiMarket-utn"]||[]).push([[0],{69:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(2),s=a.n(c),r=a(42),i=a.n(r),o=(a(69),a(11)),l=a(47),j=a(31),b=a(15),u=a.p+"static/media/logo.6ce24c58.svg",d=s.a.createContext({}),h=a(35),O=a(43);var m=function(){return Object(n.jsx)(d.Consumer,{children:function(e){return Object(n.jsx)("div",{children:Object(n.jsxs)(l.a,{collapseOnSelect:!0,expand:"lg",bg:"light",children:[Object(n.jsxs)(l.a.Brand,{as:b.b,to:"/",children:[Object(n.jsx)("img",{src:u,id:"logo"}),Object(n.jsx)("span",{id:"header",children:"TruchiMarket"})]}),Object(n.jsx)(l.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsx)(l.a.Collapse,{id:"responsive-navbar-nav",children:Object(n.jsxs)(j.a,{className:"ml-auto",children:[e.login&&Object(n.jsxs)(n.Fragment,{children:[e.username?Object(n.jsxs)(j.a.Link,{children:["Hola, ",e.username]}):null,Object(n.jsxs)(j.a.Link,{as:b.b,to:"/",children:[Object(n.jsx)(h.a,{icon:O.a})," "]}),Object(n.jsx)(j.a.Link,{onClick:e.logoutUser,children:Object(n.jsx)(h.a,{icon:O.b})})]}),!e.login&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j.a.Link,{as:b.b,to:"/",children:Object(n.jsx)(h.a,{icon:O.a})}),Object(n.jsx)(j.a.Link,{as:b.b,to:"/login",children:"Login"}),Object(n.jsx)(j.a.Link,{as:b.b,to:"/registro",children:"Registro"})]})]})})]})})}})},x=a(14),g=a(23),p=a(22),f=a(32);f.a.initializeApp({apiKey:"AIzaSyAZHMshpfUCeNoTqzTasx0FXg-28VbbRGw",authDomain:"truchimarket.firebaseapp.com",projectId:"truchimarket",storageBucket:"truchimarket.appspot.com",messagingSenderId:"714659951863",appId:"1:714659951863:web:9f893e4eb162cf4c1fcff2",measurementId:"G-WVH1B5KPRT"}),f.a.analytics();var v=f.a.firestore();f.a.auth=f.a.auth(),f.a.db=v;var y=f.a,C=a(37),S=a(38),k=a(27);var w=function(){return Object(n.jsx)(C.a,{children:Object(n.jsx)(S.a,{style:{height:"60vh"},className:"align-items-center",children:Object(n.jsxs)(k.a,{className:"text-center",children:[Object(n.jsx)("h1",{children:"\xa1Oh No!"}),Object(n.jsx)("h4",{children:"No pudimos encontrar tu producto"}),Object(n.jsx)("h1",{children:"\ud83e\udd37\u200d\u2642\ufe0f"}),Object(n.jsx)(b.b,{to:"/",style:{textDecoration:"none"},children:Object(n.jsx)(g.a,{variant:"primary",className:"btn-sm",children:"Volver al home"})})]})})})};var N=function(e){var t=Object(c.useState)({}),a=Object(x.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(!0),o=Object(x.a)(i,2),l=o[0],j=o[1],u=Object(c.useContext)(d);return Object(c.useEffect)((function(){y.db.doc("Productos/"+e.match.params.number).get().then((function(e){r(e.data()),j(!1)})).catch((function(e){console.log(e),j(!1)}))}),[]),l?Object(n.jsx)("p",{className:"loader",children:"Loading..."}):void 0===s?Object(n.jsx)(w,{}):Object(n.jsx)(C.a,{children:Object(n.jsx)(S.a,{style:{height:"80vh"},className:"align-items-center",children:Object(n.jsx)(k.a,{children:Object(n.jsxs)(p.a,{style:{marginLeft:"20%",marginRight:"20%"},className:"text-center",children:[Object(n.jsxs)(p.a.Body,{children:[Object(n.jsx)(p.a.Title,{children:s.name}),Object(n.jsx)(p.a.Img,{style:{maxHeight:"auto",maxWidth:300,margin:"auto"},variant:"top",src:s.photo_url}),Object(n.jsxs)(p.a.Text,{children:[Object(n.jsxs)("h4",{children:["$",s.price]}),Object(n.jsx)("p",{className:"small",children:s.description}),Object(n.jsxs)("p",{className:"small",children:["Stock: ",s.stock]})]})]}),u.login?Object(n.jsx)("div",{children:Object(n.jsx)(g.a,{variant:"outline-success",className:"mb-2",style:{marginTop:-30},onClick:function(e){e.target.innerHTML="Gracias por su compra!",e.target.style.backgroundColor="yellow",e.target.style.color="green"},children:"Comprar"})}):null,Object(n.jsx)(b.b,{to:"/",style:{textDecoration:"none"},children:Object(n.jsx)(g.a,{variant:"outline-secondary",className:"btn-sm mb-2",children:"Volver al home"})})]})})})})};var I=function(e){return Object(n.jsxs)(p.a,{style:{padding:10},className:"text-center",children:[Object(n.jsx)(p.a.Img,{style:{maxHeight:"auto",maxWidth:300,margin:"auto"},variant:"top",src:e.photo_url}),Object(n.jsxs)(p.a.Body,{children:[Object(n.jsx)(p.a.Title,{children:e.name}),Object(n.jsxs)(p.a.Text,{children:["$",e.price]})]}),Object(n.jsx)(b.b,{to:"/"+e.id,children:Object(n.jsx)(g.a,{variant:"outline-secondary",children:"Ver Detalle"})})]})},F=a(63),L=a(34);var T=function(){var e=Object(c.useState)(""),t=Object(x.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),i=Object(x.a)(r,2),o=i[0],l=i[1],j=Object(c.useContext)(d);return Object(c.useEffect)((function(){l(!0),y.db.collection("Productos").get().then((function(e){var t=e.docs.map((function(e){return Object(n.jsx)(I,{id:e.id,name:e.data().name,price:e.data().price,photo_url:e.data().photo_url},e.id)}));s(t),l(!1)}))}),[]),o?Object(n.jsx)("p",{className:"loader",children:"Loading..."}):Object(n.jsxs)("div",{className:"text-center",children:[j.registryFeedback?Object(n.jsx)(L.a,{variant:"success",onClose:function(){j.registryFeedbackOut()},dismissible:!0,children:"Usuario/a registrado/a con \xe9xito"}):null,Object(n.jsx)(F.a,{style:{margin:"2em"},children:a})]})},U=a(39),P=a(30),z=a(20),E=a(51);var A=function(){var e=Object(c.useState)({username:"",first:"",last:"",email:"",password:"",confirmation:""}),t=Object(x.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),i=Object(x.a)(r,2),l=i[0],j=i[1],b=Object(c.useState)(!1),u=Object(x.a)(b,2),h=u[0],O=u[1],m=Object(c.useState)(""),p=Object(x.a)(m,2),f=p[0],v=p[1],C=Object(o.f)(),S=Object(c.useContext)(d);function k(e){var t=e.target,n=t.name,c=t.value;s(Object(P.a)(Object(P.a)({},a),{},Object(U.a)({},n,c)))}return Object(n.jsxs)("div",{className:"container mt-3 text-center",children:[Object(n.jsx)("h2",{children:"Crear cuenta nueva"}),h?Object(n.jsx)(L.a,{variant:"danger",children:f}):null,Object(n.jsxs)(z.a,{onSubmit:function(e){j(!0);var t=a.email,n=a.password;y.auth.createUserWithEmailAndPassword(t,n).then((function(e){C.push("/"),y.db.collection("Usuarios").add({username:a.username,first:a.first,last:a.last,email:a.email,userId:e.user.uid}),S.registryFeedbackIn()})).then((function(){var e=a.email,t=a.password;y.auth.signInWithEmailAndPassword(e,t).then((function(e){C.push("/");var t=e.docs.map((function(e){return Object(P.a)({},e.data())}));console.log(t),S.setUsername(t[0].username),j(!1)}))})).catch((function(e){O(!0),v(e.message),j(!1)})),e.preventDefault()},children:[Object(n.jsx)(z.a.Control,{type:"text",name:"username",value:a.username,placeholder:"Nombre de usuario",onChange:k}),Object(n.jsx)("br",{}),Object(n.jsx)(z.a.Control,{type:"text",name:"first",value:a.first,placeholder:"Nombre",onChange:k}),Object(n.jsx)("br",{}),Object(n.jsx)(z.a.Control,{type:"text",name:"last",value:a.last,placeholder:"Apellido",onChange:k}),Object(n.jsx)("br",{}),Object(n.jsx)(z.a.Control,{type:"email",name:"email",value:a.email,placeholder:"Email",onChange:k}),Object(n.jsx)("br",{}),Object(n.jsx)(z.a.Control,{type:"password",name:"password",value:a.password,placeholder:"Contrase\xf1a",onChange:k}),Object(n.jsx)("br",{}),Object(n.jsx)(z.a.Control,{type:"password",name:"confirmation",value:a.confirmation,placeholder:"Confirme la contrase\xf1a",onChange:k}),Object(n.jsx)("br",{}),Object(n.jsxs)(g.a,{variant:"primary",type:"submit",children:["Registrarse",l?Object(n.jsx)(E.a,{animation:"border",variant:"light",size:"sm"}):null," "]})]})]})};var B=function(){var e=Object(c.useState)({email:"",password:""}),t=Object(x.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(!1),i=Object(x.a)(r,2),l=i[0],j=i[1],b=Object(c.useState)(""),u=Object(x.a)(b,2),h=u[0],O=u[1],m=Object(c.useState)(!1),p=Object(x.a)(m,2),f=p[0],v=p[1],C=Object(c.useContext)(d),S="",k=Object(o.f)();function w(e){var t=e.target,n=t.name,c=t.value;s(Object(P.a)(Object(P.a)({},a),{},Object(U.a)({},n,c)))}return Object(n.jsxs)("div",{className:"container mt-3 text-center",children:[Object(n.jsx)("h2",{children:"Login"}),C.logoutMessage?Object(n.jsx)(L.a,{variant:"info",onClose:function(){C.logoutFeedbackOut()},dismissible:!0,children:"Gracias por utilizar nuestros servicios"}):null,f?Object(n.jsx)(L.a,{variant:"danger",onClose:function(){v(!1)},dismissible:!0,children:h}):null,Object(n.jsxs)(z.a,{onSubmit:function(e){e.preventDefault(),j(!0);var t=a.email,n=a.password;y.auth.signInWithEmailAndPassword(t,n).then((function(e){return C.loginUser(),S=e.user.uid,y.db.collection("Usuarios").where("userId","==",S).get()})).then((function(e){var t=e.docs.map((function(e){return Object(P.a)({},e.data())}));localStorage.setItem("username",t[0].username),C.setUsername(localStorage.getItem("username")),j(!1),k.push("/")})).catch((function(e){O(e.message),v(!0),j(!1)}))},children:[Object(n.jsx)(z.a.Control,{type:"text",name:"email",value:a.email,placeholder:"Email",onChange:w}),Object(n.jsx)("br",{}),Object(n.jsx)(z.a.Control,{type:"password",name:"password",value:a.password,placeholder:"Contrase\xf1a",onChange:w}),Object(n.jsx)("br",{}),Object(n.jsxs)(g.a,{variant:"primary",type:"submit",children:["Login",l?Object(n.jsx)(E.a,{animation:"border",variant:"light",size:"sm"}):null," "]})]})]})};var D=function(e){var t=Object(c.useState)(localStorage.getItem("login")),a=Object(x.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)(localStorage.getItem("username")),l=Object(x.a)(i,2),j=l[0],b=l[1],u=Object(c.useState)(!1),h=Object(x.a)(u,2),O=h[0],m=h[1],g=Object(c.useState)(!1),p=Object(x.a)(g,2),f=p[0],v=p[1],y=Object(c.useState)(""),C=Object(x.a)(y,2),S=C[0],k=C[1],w=Object(o.f)();return Object(n.jsx)(d.Provider,{value:{login:s,loginUser:function(){r(!0),localStorage.setItem("login",!0)},logoutUser:function(){r(!1),m(!0),localStorage.clear(),w.push("/login")},logoutMessage:O,logoutFeedbackIn:function(){m(!0)},logoutFeedbackOut:function(){m(!1)},registryFeedback:f,registryFeedbackIn:function(){v(!0)},registryFeedbackOut:function(){v(!1)},username:j,setUsername:b,validProducts:S,setValidProducts:k},children:e.children})},M=a(52),H=function(){return Object(n.jsx)(C.a,{fluid:"true",children:Object(n.jsx)(S.a,{children:Object(n.jsx)(k.a,{style:{position:"absolute",bottom:0,width:"100%"},className:"text-right p-3",children:Object(n.jsx)("div",{children:Object(n.jsxs)("p",{id:"footer-text",children:["\xa9 2021 \xa0",Object(n.jsx)("span",{id:"footer-logo",children:"Julian Zamt \xa0"}),"\xa0",Object(n.jsx)(b.b,{style:{color:"inherit",fontSize:15},to:{pathname:"https://github.com/julizamt"},target:"_blank",children:Object(n.jsx)(h.a,{icon:M.a})}),"\xa0 \xa0",Object(n.jsx)(b.b,{style:{color:"inherit",fontSize:15},to:{pathname:"https://www.instagram.com/julianzamt"},target:"_blank",children:Object(n.jsx)(h.a,{icon:M.b})})]})})})})})};var V=function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(D,{children:[Object(n.jsx)(m,{}),Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{exact:!0,path:"/",component:T}),Object(n.jsx)(o.a,{exact:!0,path:"/registro",component:A}),Object(n.jsx)(o.a,{exact:!0,path:"/login",component:B}),Object(n.jsx)(o.a,{path:"/:number",component:N})]}),Object(n.jsx)(H,{})]})})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,83)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};a(80);i.a.render(Object(n.jsx)(b.a,{children:Object(n.jsx)(V,{})}),document.getElementById("root")),W()}},[[81,1,2]]]);
//# sourceMappingURL=main.71545569.chunk.js.map